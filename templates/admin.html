{% extends "base.html" %}


{% block title %}Administracion{% endblock %}



{% block content %}
<div class="container blog">
    <style>
        .col-id {
            width: 5%;
        }

        .col-titulo {
            width: 30%;
        }

        .col-descripcion {
            width: 40%;
        }

        .col-imagen {
            width: 20%;
        }

        .col-acciones {
            width: 10%;
        }

        .descripcion-corta {
            max-height: 4.5em; /* Ajusta la altura según tus necesidades */
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            
            -webkit-box-orient: vertical;
        }

    </style>
    <ul class="nav-blog col-md-auto justify-content-center ">
        <li><a href="/blog" class="nav-link px-2">Blog</a></li>
    </ul>
    <h1>Este es el Administrador </h1>
    <section>

        <div class="container">
            <form action="/upload" method="post" enctype="multipart/form-data">
                <div class="mb-3">
                    <label for="titulo" class="form-label">Titulo</label>
                    <input type="text" class="form-control" name="titulo">
                </div>
                <div class="mb-3">
                    <label for="descripcion" class="form-label">Descripcion</label>
                    <textarea type="text" class="form-control textarea" rows="10" name="descripcion"></textarea>
                </div>
                <div class="mb-3">
                    <label for="img" class="form-label">Imagen</label>
                    <input type="file" id="file" name="file" accept=".jpg, .jpeg, .png" class="form-control">
                </div>
                {% if mensaje %}
                <div class="alert alert-success" role="alert">
                    {{ mensaje }}
                </div>
                {% endif %}

                <button type="submit" class="btn btn-primary mb-3">Enviar</button>
            </form>


            <h1 class="mt-5">Lista de Noticias</h1>
            <table class="table table-striped table-bordered mt-3">
                <thead class="thead-dark">
                    <tr>
                        <th class="col-id">ID</th>
                        <th class="col-titulo">Título</th>
                        <th class="col-descripcion">Descripción</th>
                        <th class="col-imagen">Imagen</th>
                        <th class="col-acciones">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for noticia in noticias %}
                    <tr>
                        <td class="col-id">{{ noticia.id }}</td>
                        <td class="col-titulo">{{ noticia.titulo }}</td>
                        <td class="col-descripcion">
                            <div class="descripcion-corta">{{ noticia.parrafo }}</div>
                            <button class="btn btn-link p-0" onclick="toggleDescripcion(this)">Ver más</button>
                        </td>
                        <td class="col-imagen"><img src="{{ noticia.imagen }}" alt="Imagen de {{ noticia.titulo }}" class="img-thumbnail" style="max-width: 200px;"></td>
                        <td class="col-acciones">
                            <a href="/editar/{{ noticia.id }}" class="btn btn-warning btn-sm">Editar</a>
                            <a href="/borrar/{{ noticia.id }}" class="btn btn-danger btn-sm">Borrar</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>



    </section>

</div>



{% endblock %}